<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>光遇身高查看工具</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
        <div class="header">
            <h1 data-lang-key="title">光遇身高查看工具</h1>
            <div class="header-buttons">
                <button id="theme-switcher" class="icon-button" aria-label="Toggle theme">
                    <svg id="theme-icon-light" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
                    <svg id="theme-icon-dark" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" style="display:none;"><path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>
                </button>
            </div>
        </div>
        
        <details>
            <summary data-lang-key="toggle_instructions">點此展開/收合使用教學</summary>
            <div class="instructions">
                <p data-lang-key="inst_1">1. 在遊戲中，點擊右上角齒輪進入設定，選擇「帳號」，再點選「帳號資訊」，最後點選「造型 QR code」。</p>
                <p><b data-lang-key="inst_2">（注意：這不是加好友的 QR Code！）</b></p>
                <p data-lang-key="inst_3">2. 掃描該 QR Code。</p>
                <p data-lang-key="inst_4">3. 掃描後會得到一串網址，例如：<br><code>https://sky.thatg.co/o=8RV7ImJv...</code></p>
                <p><b data-lang-key="inst_5" style="display: inline;">4. 請複製完整的網址</b><span data-lang-key="inst_5_zh">，然後直接貼到下方的輸入框中即可！</span></p>
            </div>
        </details>
        
        <label for="b64-input" data-lang-key="input_label">請在此貼上掃描到的完整網址：</label>
        <textarea id="b64-input" data-lang-key="placeholder" placeholder="將完整網址貼在這裡……"></textarea>
        
        <button id="calculate-btn" data-lang-key="calculate_btn">開始計算</button>

        <div class="results">
            <div class="result-item important">
                <span class="label" data-lang-key="res_current">當前身高:</span>
                <span class="value" id="res-current">...</span>
            </div>
            <div class="result-item">
                <span class="label" data-lang-key="res_tallest">最高身高:</span>
                <span class="value" id="res-tallest">...</span>
            </div>
            <div class="result-item">
                <span class="label" data-lang-key="res_shortest">最低身高:</span>
                <span class="value" id="res-shortest">...</span>
            </div>
            <div class="result-actions" id="result-actions" style="display: none;">
                <button id="copy-btn" data-lang-key="copy_btn">複製結果</button>
                <details class="customization-details">
                    <summary data-lang-key="customize_image">自訂並生成分享圖</summary>
                    <div class="customization-options">
                        <div class="option-group">
                            <label data-lang-key="player_name">玩家名稱 (選填):</label>
                            <input type="text" id="player-name" data-lang-key="player_name_placeholder" placeholder="Your Name">
                        </div>
                        <div class="option-group">
                            <label data-lang-key="bg_style_upload">上傳我的圖片:</label>
                            <input type="file" id="upload-bg" accept="image/*">
                            <div id="uploaded-image-preview" class="selector-group image-selector"></div>
                        </div>
                        <div class="option-group">
                            <label data-lang-key="bg_style_image">內建圖片背景:</label>
                            <div id="bg-selector" class="selector-group image-selector"></div>
                        </div>
                        <div class="option-group">
                            <label data-lang-key="bg_style_gradient">純色背景:</label>
                            <div id="gradient-selector" class="selector-group"></div>
                        </div>
                        <div class="option-group">
                            <label data-lang-key="text_color">文字顏色:</label>
                            <div id="text-color-selector" class="selector-group">
                                <button class="selectable-option text-color-option active" data-color="white" data-lang-key="text_white">淺色</button>
                                <button class="selectable-option text-color-option" data-color="black" data-lang-key="text_black">深色</button>
                            </div>
                        </div>
                        <button id="image-btn" data-lang-key="image_btn">生成分享圖</button>
                    </div>
                </details>
            </div>
        </div>
        <div id="status"></div>

        <div id="history" class="history-container" style="display: none;">
            <div class="history-header">
                <h2 data-lang-key="history_title">歷史紀錄</h2>
                <button id="clear-history-btn" data-lang-key="clear_history_btn">清空紀錄</button>
            </div>
            <ul id="history-list"></ul>
        </div>
    </div>

    <footer class="footer">
        <button id="feedback-btn" class="icon-button" aria-label="Report issue" data-lang-key="feedback_btn_label" title="問題回報">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 20px; height: 20px;">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
            </svg>
        </button>
        <span class="footer-separator">|</span>
        <a href="https://github.com/dream10325/sky-cotl-height-tool" target="_blank" rel="noopener noreferrer" data-lang-key="github_link">
            GitHub
        </a>
        <span class="footer-separator">|</span>
        <div id="lang-switcher" class="footer-lang-switcher">
            <span class="lang-option" data-lang="en">English</span>
            <span class="lang-option active" data-lang="zh-Hant">繁體中文</span>
        </div>
    </footer>

    <div id="feedback-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="close-feedback-modal">&times;</span>
            <h2 data-lang-key="feedback_title">問題回報 / 功能建議</h2>
            <p data-lang-key="feedback_desc">感謝您的回饋！請詳細描述您遇到的問題或建議。</p>
            <textarea id="feedback-text" data-lang-key="feedback_placeholder" placeholder="請在此輸入內容..."></textarea>
            <button id="submit-feedback-btn" data-lang-key="feedback_submit_btn">送出</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
